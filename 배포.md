# 배포관리와 태그 

## 배포

프로그램을 개발한 후에는 완성된 결과물을 최종 사용자에게 전달해야 한다. 이때 최종 사용자에게 전달하는 과정을 `배포`라고 한다.         
개발을 완료했다고 해서 결과물을 직접 사용자에게 배포할 수 없다. 완성된 형태로 결과물을 배포하려면 코드를 정리하는 작업들이 추가로 필요하다.  
개발 단계에서 발생한 테스트 메시지나 불필요한 주석들을 정리한다.  
이러한 정리 작업을 거쳐 코드를 좀 더 깔끔하게 만들 수 있고, 배포도 가능하다.  
더불어 정리 작업은 조금이지만 코드 옹량을 줄이는 효과도 있다. 즉, 배포는 정리된 최종 결과물을 만드는 과정이다.    

개발자에게는 코드를 안정적인 상태로 유지하면서 쉽게 배포할 수 있는 도구들이 필요하다. 배포를 잘하려면 코드를 깔끔하게 정리할 수 있는 환경이 필요하다. 또 사용자가 파일을 쉽게 내려받을 수 있게 해야 한다. 이러한 이유로 깃은 코드를 배포하는 데도 많이 사용한다.  


## 버전
코드를 배포할때 당시에는 발견하지 못했는데, 이후에 잘못된 동작을 하거나 예외적인 상황이 생경 처리하지 못하는 동작들이 있을 수 있다. 또는 최종 사용자가 추가 기능을 요구할 때도 있다.  
이대는 코드를 수정해야 한다. 즉, **코드는 개발을 완료한 후에도 계속 수정된다.**  

코드를 수정했다면 개발자 또는 최종 사용자가 이를 확인하고 구별할 수 있어야 한다.   

코드에서 이러한 차이를 구별할 수 있게 하는 것이 바로 **버전**이다.  

정식 버전은 1부터 시작하고 첫 자리가 0으로 시작하면 아직 초기 개발 중인 제품이라는 의미이다.  이를 `메이저 버전`이라고 한다.  메이저 번호를 변경하면 하위 버전과 호환성이 낮아질 수 도 있다.    

메이저 버전 다음으로 작은 코드의 변화는 `점(.)`으로 구분한다. 보통 두 자리 또는 세 자리 형태의 숫자로 작성한다.  

- 두 자리: 1.0
- 세 자리: 2.1.4    

보통 두 번째 자리는 메이저 버전에서 기능을 추가하거나 변경 사항이 있을 때 바꾼다. 다른 말로 **마이너 번호**라고도 한다.  세 번째 자리는 버그 수정 등 미미한 변화가 있을 때 바꾼다. 다른 말로 `패치(patch)`라고도 한다.  이처럼 세 자리 숫자 형태로 표기하는 버전을 `SemVer(Semantic Versioning)방식` 이라고 한다.  

 

## 태그

깃에서는 코드 배포를 관리하려고 태그 기능을 제공한다. 커밋은 코드 변화를 기록한 것이다. 그리고 각 커밋은 서로 다른 코드의 상태를 가진다. 물론 배포를 위해 최종 정리된 커밋도 있다.  
깃은 정리도니 커밋을 배포할 수 있도록 특수한 포인터를 제공하며, 특정 커밋을 가리는 포인터로 버전을 관리한다.  그리고 이 포인터를 `태그`라고 한다.  

즉, **태그는 특정 커밋의 해시 값을 가리키는 꼬리표를 의미**한다.  

최종 사용자는 개발자가 부여한 태그를 사용하여 코드 버전을 구별한다. 또 태그 포인터로 최종 배포판의 커밋을 구별한다. 태그는 커밋 해시 값을 기준으로 생성되고, 특정 커밋 해시 값을 가리키는 것뿐만 아니라, 꼬리표 이름과 저보도 포함한다.  이러한 태그는 추가 정보를 보유하는지 여부에 따라 두 가지로 구분한다.  

- Annotated: 태그 이름 + 정보 포함
- Lightweight : 태그 이름만 포함    
  
## 태그 목록
태그를 사용하려면 `tag` 명령어를 사용한다. 단독으로 실행할 수도 있고, 옵션을 추가할 수도 있다.  옵션은 `-l` 또는 `--list`옵션을 같이 사용한다.  

`$ git tag`   

## Annotated 태그

Annotated 태그는 깃에서 가장 일반적으로 사용하는 태그 방법이다. Annotated는 **주석이 달린**이라는 뜻이다.  

### 태그 생성
Annotates 태그를 생성할 때는 커밋의 해시 값뿐 아니라 추가로 생성자 정보를 같이 넣을 수 있다. 예를 들어 이메일, 날짜, 메시지 등 정보이다. 또 GPG 방식으로 서명도 가능하다. 
Annotated 태그를 생성하려면 tag 명령어 뒤에 -a 옵션을 사용한다.  

`$ git tag -a 버전`  

![태그 생성 1](images/img_102.png)   
작성한 커밋에 Annotated 태그를 붙여보자.    
![태그 생성 2](images/img_103.png)     
![태그 생성 3](images/img_104.png)    

간락한 메시지를 작서앟고 저장하면, 정상적으로 태그가 생성된다. 태그는 현재의 마지막 커밋을 기준으로 생성되며, 이 커밋은 HEAD 포인터와 일치한다.  

![태그 생성 4](images/img_105.png)   

앞에서 생성한 태그를 확인해 봅시다. 생성한 태그의 버전을 출력합니다.

![태그 생성 5](images/img_106.png)   
![태그 생성 6](images/img_107.png)   

이번에는 생성된 태그를 좀 더 자세히 알아보자.   

![태그 생성 7](images/img_108.png)   
![태그 생성 8](images/img_109.png)   

생성된 태그가 5cba8a커밋에 1.0.0으로 추가된 것을 확인 할 수 있다.  
